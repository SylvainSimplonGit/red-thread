<div id="sheet">
  <div id="headerSheet">
    <div id="buttonBack">
      <a [routerLink]="['/movies']">
        <img alt="back to movie list" src="/assets/back.png">
      </a>
    </div>
    <div id="pageName">
      <h3>Fiche du film</h3>
    </div>
      <app-star-rating
        [rating]="localRating"
        [starCount]="starCount"
      >

      </app-star-rating>
  </div>
  <div id="contentSheet">
    <div id="poster" class="col-30">
      <img *ngIf="movie.posterUrl" alt="poster" class="poster" [src]="movie.posterUrl">
    </div>
    <div id="details" class="col-last">
      <div class="row">
        <div class="label col-20">Titre</div>
        <div class="data col-30">{{ movie.title }}</div>
        <div class="label col-10">Note</div>
        <div class="data col-10 center">{{ movie.imdbRating }}</div>
      </div>

      <div class="row">
        <div class="label col-20">Date de sortie</div>
        <div class="data col-30 center">{{ movie.released | date:'dd/MM/yyyy':'fr-FR'}}</div>
        <div class="label col-10">Votants</div>
        <div class="data col-10 center">{{ movie.imdbVote }}</div>
      </div>

      <div class="row">
        <div class="label col-20">Réalisateur</div>
        <div class="data col-30">{{ movie.director }}</div>
        <div class="label col-10" (click)="refreshMovieInfo(movie.idImdb)">id IMDB</div>
        <div class="data col-10 center">{{ movie.idImdb }}</div>
      </div>

      <div class="row">
        <div class="label col-20">Genres</div>
        <div class="data col-30">
          <span *ngFor="let genre of movie.genres ; let i=index">
            <span *ngIf="(movie.genres)?.length <= maxGenre; else elseGreaterThan">
              <span *ngIf="i < (movie.genres)?.length - 1; else elseIf">
                {{ genre.name }},
              </span>
              <ng-template #elseIf>
                {{ genre.name }}
              </ng-template>
            </span>
            <ng-template #elseGreaterThan>
              <span *ngIf="i < (maxGenre - 1)">
                {{ genre.name }},
              </span>
              <span *ngIf="i === (maxGenre - 1)">
                {{ genre.name }}...
              </span>
            </ng-template>
          </span>
        </div>
        <div class="label col-10">Durée</div>
        <div class="data col-10 center">{{ movie.runtime }} min</div>
      </div>

      <div class="row">
        <div class="label col-20">Acteurs</div>
        <div class="data col-50">
          <span *ngFor="let actor of movie.actors ; let i=index">
            <span *ngIf="(movie.actors)?.length <= maxActor; else elseGreaterThan">
              <span *ngIf="i < (movie.actors)?.length - 1; else elseIf">
                {{ actor.name }},
              </span>
              <ng-template #elseIf>
                {{ actor.name }}
              </ng-template>
            </span>
            <ng-template #elseGreaterThan>
              <span *ngIf="i < (maxActor - 1)">
                {{ actor.name }},
              </span>
              <span *ngIf="i === (maxActor - 1)">
                {{ actor.name }}...
              </span>
            </ng-template>
          </span>
        </div>
      </div>

      <div class="row">
        <div class="label col-20">Synopsis</div>
        <div class="data  col-50">
          {{ movie.plot | slice: 0: 260}} ...
        </div>
      </div>

    </div>
  </div>
</div>
